<Page x:Class="Prüfstand_Bedienanwendung_V3.Views.LiveAnzeigePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="clr-namespace:Prüfstand_Bedienanwendung_V3.Views.Controls"
      xmlns:data="clr-namespace:Prüfstand_Bedienanwendung_V3.Data"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      mc:Ignorable="d"
      Background="#1C1C1C">

    <Grid>

        <!-- Overlay: Simulation-Button -->
        <Button Width="160" Height="40"
                HorizontalAlignment="Right" VerticalAlignment="Top"
                Margin="16"
                Command="{Binding ToggleSimulationCommand}"
                FocusVisualStyle="{x:Null}">
            <Button.Style>
                <Style TargetType="Button">
                    <Setter Property="Foreground" Value="White"/>
                    <Setter Property="Background" Value="#2E7D32"/>
                    <Setter Property="BorderThickness" Value="0"/>
                    <Setter Property="Cursor" Value="Hand"/>
                    <Setter Property="Content" Value="Simulation START"/>
                    <Setter Property="Padding" Value="8,4"/>
                    <Setter Property="FontWeight" Value="SemiBold"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsSimulating}" Value="True">
                            <Setter Property="Background" Value="#C62828"/>
                            <Setter Property="Content" Value="Simulation STOP"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Button.Style>
        </Button>

        <!-- Skalierbarer Inhalt -->
        <Viewbox Stretch="Uniform" StretchDirection="Both">
            <Grid Width="1600" Height="900" Margin="20">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- 4 Haupt-Kacheln -->
                <Grid Grid.Row="0" Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Geschwindigkeit -->
                    <local:MetricDisplay Title="Geschwindigkeit" Unit="km/h" SettingKey="speed"
                                         Value="{Binding Source={x:Static data:GlobalData.Instance}, Path=SpeedKmh}"
                                         ValueFontSize="120"
                                         ShowBar="True" Min="0" Max="300" BarHeight="12"
                                         ShowScale="True" ScaleHeight="26" ScaleLabelFormat="N0"
                                         Grid.Row="0" Grid.Column="0" Margin="12"/>

                    <!-- Motordrehzahl -->
                    <local:MetricDisplay Title="Motordrehzahl" Unit="RPM" SettingKey="rpm"
                                         Value="{Binding Source={x:Static data:GlobalData.Instance}, Path=Rpm}"
                                         ValueFontSize="120"
                                         ShowBar="True" Min="0" Max="15000" BarHeight="12"
                                         ShowScale="True" ScaleHeight="26" ScaleLabelFormat="N0"
                                         Grid.Row="0" Grid.Column="1" Margin="12"/>

                    <!-- Drehmoment -->
                    <local:MetricDisplay Title="Drehmoment" Unit="Nm" SettingKey="torque"
                                         Value="{Binding Source={x:Static data:GlobalData.Instance}, Path=TorqueNm}"
                                         ValueFontSize="120"
                                         ShowBar="True" Min="0" Max="1000" BarHeight="12"
                                         ShowScale="True" ScaleHeight="26" ScaleLabelFormat="N0"
                                         Grid.Row="1" Grid.Column="0" Margin="12"/>

                    <!-- Leistung -->
                    <local:MetricDisplay Title="Leistung" Unit="PS" SettingKey="power"
                                         Value="{Binding Source={x:Static data:GlobalData.Instance}, Path=PowerPS}"
                                         ValueFontSize="120"
                                         ShowBar="True" Min="0" Max="250" BarHeight="12"
                                         ShowScale="True" ScaleHeight="26" ScaleLabelFormat="N0"
                                         Grid.Row="1" Grid.Column="1" Margin="12"/>
                </Grid>

                <!-- 3 Zusatz-Kacheln -->
                <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" Margin="12">
                    <local:MetricDisplay Title="DIN Faktor" Unit="%"
                     Value="{Binding DINFactorPct}"
                     ValueFontSize="64"
                     Width="420" Height="220" Margin="8"/>

                    <local:MetricDisplay Title="Temperatur" Unit="°C"
                     Value="{Binding TemperatureC}"
                     ValueFontSize="64"
                     Width="420" Height="220" Margin="8"/>

                    <local:MetricDisplay Title="Druck" Unit="hPa"
                     Value="{Binding PressurehPa}"
                     ValueFontSize="64"
                     Width="420" Height="220" Margin="8"/>

                </StackPanel>

            </Grid>
        </Viewbox>
    </Grid>
</Page>
